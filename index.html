<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="author" content="Yang C.E.O.">
    <title>2026 éˆé­‚äººæ ¼è§£æ | Yang C.E.O.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        nexus: { dark: '#0f0c29', purple: '#302b63', light: '#24243e', accent: '#a8c0ff' }
                    },
                    fontFamily: {
                        sans: ['"Noto Sans TC"', 'sans-serif'],
                        display: ['"Space Grotesk"', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* --- åŸºç¤è¨­å®š --- */
        body {
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            min-height: 100vh;
            -webkit-tap-highlight-color: transparent;
            overflow-x: hidden;
        }

        .no-copy { user-select: none; -webkit-user-select: none; pointer-events: none; }
        
        input, select, button {
            user-select: text !important;
            -webkit-user-select: text !important;
            pointer-events: auto !important;
            cursor: pointer;
            position: relative;
            z-index: 50;
        }
        
        input:focus, select:focus {
            outline: 2px solid #a8c0ff;
            background-color: rgba(0, 0, 0, 0.6);
        }

        /* --- ç»ç’ƒæ“¬æ…‹å¡ç‰‡ --- */
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            position: relative;
            z-index: 10;
        }

        .option-btn:active { transform: scale(0.98); }
        .fade-in { animation: fadeIn 0.6s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* --- Info Box --- */
        .info-box {
            background: rgba(0, 0, 0, 0.3);
            border-left: 3px solid #a8c0ff;
            padding: 10px;
            margin-top: 8px;
            font-size: 0.8rem;
            color: #d1d5db;
            line-height: 1.5;
        }
        .highlight { color: #a8c0ff; font-weight: bold; }

        /* --- Tab System Styles --- */
        .tab-btn {
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
            opacity: 0.6;
        }
        .tab-btn.active {
            border-bottom: 2px solid #a8c0ff;
            opacity: 1;
            color: #fff;
            font-weight: bold;
        }
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.4s ease; }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <div id="app" class="w-full max-w-md mx-auto relative">
        
        <div class="text-center mb-4 opacity-70 no-copy">
            <p class="text-xs tracking-widest text-nexus-accent">POWERED BY</p>
            <p class="text-sm font-bold text-white font-display tracking-wide">Yang C.E.O.</p>
        </div>

        <div id="phase-input" class="glass-card rounded-2xl p-6 md:p-8 fade-in">
            <div class="text-center mb-6 no-copy">
                <h1 class="text-2xl md:text-3xl font-display font-bold mb-2 text-transparent bg-clip-text bg-gradient-to-r from-nexus-accent to-purple-400">SOUL MATRIX 2026</h1>
                <p class="text-gray-400 text-xs md:text-sm">2026 å¹´åº¦æµå¹´ x MBTI æ·±åº¦äººæ ¼è§£æ</p>
            </div>
            
            <div class="space-y-5">
                <div>
                    <label class="block text-xs text-gray-400 mb-2 ml-1 no-copy">æ‚¨çš„åå­— / æš±ç¨±</label>
                    <input type="text" id="userName" class="w-full bg-black/40 border border-gray-500 rounded-lg p-3 text-white placeholder-gray-500 transition-colors" placeholder="è«‹è¼¸å…¥å§“å">
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-xs text-gray-400 mb-2 ml-1 no-copy">å‡ºç”Ÿæœˆä»½</label>
                        <select id="birthMonth" class="w-full bg-black/40 border border-gray-500 rounded-lg p-3 text-white appearance-none">
                            <option value="" class="text-gray-500">æœˆä»½</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-xs text-gray-400 mb-2 ml-1 no-copy">å‡ºç”Ÿæ—¥æœŸ</label>
                        <select id="birthDay" class="w-full bg-black/40 border border-gray-500 rounded-lg p-3 text-white appearance-none">
                            <option value="" class="text-gray-500">æ—¥æœŸ</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-xs text-gray-400 mb-2 ml-1 no-copy">è¡€å‹ (å½±éŸ¿æ½›æ„è­˜)</label>
                    <div class="grid grid-cols-4 gap-2">
                        <button type="button" onclick="selectBlood('A')" id="btn-A" class="blood-btn bg-black/40 border border-gray-500 rounded-lg py-3 text-sm font-medium transition hover:bg-white/10" data-type="A">A</button>
                        <button type="button" onclick="selectBlood('B')" id="btn-B" class="blood-btn bg-black/40 border border-gray-500 rounded-lg py-3 text-sm font-medium transition hover:bg-white/10" data-type="B">B</button>
                        <button type="button" onclick="selectBlood('O')" id="btn-O" class="blood-btn bg-black/40 border border-gray-500 rounded-lg py-3 text-sm font-medium transition hover:bg-white/10" data-type="O">O</button>
                        <button type="button" onclick="selectBlood('AB')" id="btn-AB" class="blood-btn bg-black/40 border border-gray-500 rounded-lg py-3 text-sm font-medium transition hover:bg-white/10" data-type="AB">AB</button>
                    </div>
                </div>
            </div>

            <button onclick="startQuiz()" class="mt-8 w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white font-bold py-3 md:py-4 rounded-lg shadow-lg hover:shadow-xl hover:scale-[1.02] transition transform active:scale-95">
                é–‹å§‹ 2026 é‹å‹¢è§£æ
            </button>
        </div>

        <div id="phase-quiz" class="hidden glass-card rounded-2xl p-6 fade-in min-h-[400px] flex flex-col">
            <div class="w-full bg-gray-700 h-1 rounded-full mb-6">
                <div id="progressBar" class="bg-nexus-accent h-1 rounded-full transition-all duration-300" style="width: 5%"></div>
            </div>
            
            <div class="flex-grow flex flex-col justify-center">
                <span id="qCategory" class="text-xs font-bold tracking-widest text-purple-300 mb-2 uppercase no-copy">Category</span>
                <h2 id="qText" class="text-lg md:text-xl font-bold mb-6 leading-relaxed no-copy">é¡Œç›®è¼‰å…¥ä¸­...</h2>
                
                <div class="space-y-3">
                    <button id="optA" class="option-btn w-full text-left p-4 rounded-xl border border-white/10 bg-white/5 transition hover:bg-white/10 text-sm md:text-base">
                        Option A
                    </button>
                    <button id="optB" class="option-btn w-full text-left p-4 rounded-xl border border-white/10 bg-white/5 transition hover:bg-white/10 text-sm md:text-base">
                        Option B
                    </button>
                </div>
            </div>
            
            <div class="text-center mt-6 text-gray-500 text-xs no-copy">
                Question <span id="qIndex">1</span> / 10
            </div>
        </div>

        <div id="phase-loading" class="hidden text-center py-20 fade-in">
            <div class="inline-block w-14 h-14 border-4 border-white/10 border-t-nexus-accent rounded-full animate-spin mb-4"></div>
            <h2 class="text-lg font-bold no-copy">æ­£åœ¨ä¸‹è¼‰ 2026 æ˜Ÿæ›†...</h2>
            <p id="loadingText" class="text-xs text-gray-400 mt-2 no-copy">åˆ†ææ½›æ„è­˜çµæ§‹...</p>
        </div>

        <div id="phase-result" class="hidden fade-in">
            <div class="glass-card rounded-2xl overflow-hidden border-t-4 border-nexus-accent flex flex-col max-h-[90vh]">
                
                <div class="p-5 pb-2 text-center bg-white/5 shrink-0">
                    <div class="inline-block px-3 py-1 rounded-full bg-white/10 text-[10px] text-nexus-accent mb-1 no-copy">
                        <span id="resDate"></span> | <span id="resZodiac"></span> | <span id="resBlood"></span>
                    </div>
                    
                    <div class="flex items-center justify-center space-x-4 mb-2">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-tr from-purple-500 via-pink-500 to-yellow-500 blur-sm flex items-center justify-center relative animate-pulse">
                            <div class="w-14 h-14 rounded-full bg-black flex items-center justify-center relative z-10">
                                <span id="resMBTI" class="text-lg font-bold text-white font-display">INTJ</span>
                            </div>
                        </div>
                        <div class="text-left">
                            <h1 id="resArchetype" class="text-xl font-display font-bold text-white mb-0 leading-tight no-copy">å¹•å¾Œå¸ç‹</h1>
                            <div id="resMBTIExplain" class="text-[10px] text-gray-400">å¤–å‘(E)+å¯¦æ„Ÿ(S)...</div>
                        </div>
                    </div>
                    <p id="resKeywords" class="text-[10px] text-purple-300 font-bold tracking-wider no-copy">#é—œéµå­—</p>
                </div>

                <div class="flex border-b border-white/10 bg-black/20 shrink-0">
                    <button onclick="switchTab('core')" id="tab-core" class="tab-btn active flex-1 py-3 text-xs md:text-sm text-gray-400">ğŸ”® éˆé­‚æœ¬è³ª</button>
                    <button onclick="switchTab('vibe')" id="tab-vibe" class="tab-btn flex-1 py-3 text-xs md:text-sm text-gray-400">ğŸ­ ä¸Šå‡æ°£å ´</button>
                    <button onclick="switchTab('advice')" id="tab-advice" class="tab-btn flex-1 py-3 text-xs md:text-sm text-gray-400">ğŸŒŒ 2026 é è¨€</button>
                </div>

                <div class="p-5 overflow-y-auto custom-scrollbar flex-grow" style="min-height: 280px;">
                    
                    <div id="content-core" class="tab-content active space-y-4">
                        <h3 class="font-bold text-white text-sm mb-2">âš¡ ä½ çš„æ ¸å¿ƒéˆé­‚ (Core Self)</h3>
                        <p id="resDescMain" class="text-sm text-gray-300 text-justify leading-relaxed">...</p>
                        
                        <div class="info-box">
                            <p class="mb-2"><span class="highlight">ğŸ” MBTI æ˜¯ä»€éº¼ï¼Ÿ</span><br>é€™æ˜¯ä½ çš„å¤§è…¦ä½œæ¥­ç³»çµ±ã€‚ä¾‹å¦‚ã€ŒINTJã€ä»£è¡¨ä½ ç”¨å…§å‘ç›´è¦ºæ€è€ƒï¼Œæ˜¯å¤©ç”Ÿçš„ç­–ç•¥å®¶ã€‚</p>
                            <p><span class="highlight">â˜€ï¸ å¤ªé™½æ˜Ÿåº§ (Sun Sign)</span><br>ä»£è¡¨ä½ èˆ‡ç”Ÿä¿±ä¾†çš„æœ¬è³ªèˆ‡äººç”Ÿç›®æ¨™ã€‚</p>
                        </div>
                    </div>

                    <div id="content-vibe" class="tab-content space-y-4">
                        <h3 class="font-bold text-white text-sm mb-2">ğŸ­ ä½ çš„ç¤¾äº¤é¢å…· (Social Mask)</h3>
                        <p id="resDescVibe" class="text-sm text-gray-300 text-justify leading-relaxed">...</p>
                        
                        <div class="info-box">
                            <p><span class="highlight">ğŸ­ ä¸Šå‡æ°£å ´ (Rising Vibe)</span><br>
                            å¦‚æœå¤ªé™½æ˜Ÿåº§æ˜¯éˆé­‚ï¼Œé€™å°±æ˜¯ä½ çš„ã€Œæˆ°è¢ã€ã€‚<br>
                            å³ä¾¿ä½ æ˜¯ç†±æƒ…çš„ç«è±¡æ˜Ÿåº§ï¼Œè‹¥æ¸¬å‡ºã€ŒåœŸå…ƒç´ æ°£å ´ã€ï¼Œä»£è¡¨ä½ åœ¨é™Œç”Ÿäººé¢å‰æœƒé¡¯å¾—é«˜å†·ã€å°ˆæ¥­ï¼Œé€™æ˜¯ä½ çš„é˜²ç¦¦æ©Ÿåˆ¶ã€‚</p>
                        </div>
                    </div>

                    <div id="content-advice" class="tab-content space-y-4">
                         <div class="bg-gradient-to-r from-purple-900/40 to-blue-900/40 p-4 rounded-lg border border-white/10">
                            <h3 class="font-bold text-nexus-accent mb-2 text-sm">ğŸ”® 2026 æµå¹´é è¨€</h3>
                            <p id="resAdvice" class="italic text-sm text-gray-200 leading-relaxed">...</p>
                        </div>
                        
                        <div class="mt-4 p-4 rounded-lg border border-dashed border-gray-600 bg-white/5 text-center">
                            <h4 class="text-xs text-gray-400 mb-1">2026 å¹¸é‹é—œéµå­—</h4>
                            <p id="resLucky" class="text-lg font-bold text-white tracking-widest">ACTION</p>
                        </div>

                        <div class="text-center mt-4">
                            <div class="text-xs text-gray-500 mb-2">é•·æŒ‰ä¸‹æ–¹æŒ‰éˆ•ä¿å­˜ï¼Œæ˜å¹´é©—è­‰ä½ çš„é è¨€</div>
                        </div>
                    </div>
                </div>

                <div class="p-4 bg-black/40 text-center shrink-0">
                    <button class="w-full bg-white text-black font-bold py-3 rounded-lg hover:bg-gray-200 transition text-sm">
                        é•·æŒ‰æˆªåœ– 2026 å‘½ç›¤
                    </button>
                    <p class="text-[10px] text-gray-500 mt-2 no-copy">Copyright Â© 2026 Yang C.E.O.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Tab Logic ---
        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active', 'text-white', 'font-bold');
                btn.classList.add('text-gray-400');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            const activeBtn = document.getElementById('tab-' + tabName);
            const activeContent = document.getElementById('content-' + tabName);
            activeBtn.classList.add('active', 'text-white', 'font-bold');
            activeBtn.classList.remove('text-gray-400');
            activeContent.classList.add('active');
        }

        // --- IP Protection ---
        document.addEventListener('contextmenu', event => event.preventDefault());

        // --- Init ---
        const monthSel = document.getElementById('birthMonth');
        const daySel = document.getElementById('birthDay');
        for(let i=1; i<=12; i++) {
            let opt = document.createElement('option');
            opt.value = i; opt.innerText = i + 'æœˆ';
            opt.className = "text-black"; monthSel.appendChild(opt);
        }
        for(let i=1; i<=31; i++) {
            let opt = document.createElement('option');
            opt.value = i; opt.innerText = i + 'æ—¥';
            opt.className = "text-black"; daySel.appendChild(opt);
        }

        // State
        let userData = { name: '', birthMonth: '', birthDay: '', bloodType: '' };
        let currentStep = 0;
        let scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0, fire: 0, earth: 0, air: 0, water: 0 };

        // Quiz Data
        const quizData = [
            { id: 1, category: "Energy", question: "åƒåŠ å……æ»¿é™Œç”Ÿäººçš„ç¤¾äº¤èšæœƒï¼Œä½ çš„ç‹€æ…‹é€šå¸¸æ˜¯ï¼Ÿ", options: [{ text: "è‡ªå¸¶èšå…‰ç‡ˆï¼šæŠ¬é ­æŒºèƒ¸ï¼Œæº–å‚™å¥½èªè­˜æ–°æœ‹å‹ã€‚", score: { E: 2, fire: 2 } }, { text: "éš±å½¢æ–—ç¯·ï¼šé»˜é»˜æ»‘å…¥è§’è½ï¼Œå…ˆè§€å¯Ÿç’°å¢ƒã€‚", score: { I: 2, earth: 1, water: 1 } }] },
            { id: 2, category: "Reaction", question: "æœ‹å‹è‡¨æ™‚ç´„ä½ ï¼šã€Œç¾åœ¨å‡ºä¾†å–ä¸€æ¯ï¼Ÿã€ï¼Œä½ çš„åæ‡‰ï¼Ÿ", options: [{ text: "èªªèµ°å°±èµ°ï¼šå¥½å•Šï¼å‰›å¥½æ²’äº‹ï¼Œæ„Ÿè¦ºå¾ˆæœ‰è¶£ã€‚", score: { P: 2, fire: 1, air: 1 } }, { text: "çŒ¶è±«å†ä¸‰ï¼šå‘ƒ...æˆ‘è¦å…ˆç¢ºèªæ˜å¤©çš„è¡Œç¨‹ã€‚", score: { J: 2, earth: 2 } }] },
            { id: 3, category: "Role", question: "åœ¨åœ˜é«”ä¸­ï¼Œå¤§å®¶é€šå¸¸å…¬èªä½ æ“”ç•¶ä»€éº¼è§’è‰²ï¼Ÿ", options: [{ text: "æ°£æ°›è£½é€ è€…ï¼šè² è²¬è¬›ç¬‘è©±ã€æ§å ´ã€‚", score: { E: 2, F: 1, air: 2 } }, { text: "è»å¸«æˆ–å‚¾è½è€…ï¼šè©±ä¸å¤šï¼Œä½†é–‹å£æ˜¯é‡é»ã€‚", score: { I: 2, T: 1, water: 1 } }] },
            { id: 4, category: "Conflict", question: "ä¸å¾—ä¸èˆ‡è¨å­çš„äººå…±äº‹ï¼Œä½ æœƒï¼Ÿ", options: [{ text: "æˆ´ä¸Šå‡é¢å…·ï¼šè¡¨é¢å®¢æ°£ï¼Œç¶­æŒé«”é¢ã€‚", score: { E: 1, F: 1, air: 2 } }, { text: "å…¬äº‹å…¬è¾¦è‡‰ï¼šé¢ç„¡è¡¨æƒ…ï¼Œåªè«‡å·¥ä½œã€‚", score: { I: 1, T: 2, earth: 1 } }] },
            { id: 5, category: "Style", question: "ä½ ä»Šå¤©çš„ç©¿æ­é¢¨æ ¼é€šå¸¸å–æ±ºæ–¼ï¼Ÿ", options: [{ text: "å¿ƒæƒ…èˆ‡èˆ’é©ï¼šæˆ‘æƒ³ç©¿ä»€éº¼å°±ç©¿ä»€éº¼ã€‚", score: { N: 1, P: 1, fire: 1 } }, { text: "å ´åˆèˆ‡å½¢è±¡ï¼šè¦å‘ˆç¾å‡ºå°ˆæ¥­æˆ–åˆé©çš„æ¨£å­ã€‚", score: { S: 1, J: 1, earth: 1 } }] },
            { id: 6, category: "Art", question: "çœ‹åˆ°ä¸€å¼µæŠ½è±¡ç•«ï¼Œä½ çš„ç¬¬ä¸€å€‹å¿µé ­ï¼Ÿ", options: [{ text: "å…·é«”è¯æƒ³ï¼šé€™æ˜¯å¤©ç©ºï¼Ÿé‚„æ˜¯å¤§æµ·ï¼Ÿ", score: { S: 2, earth: 1 } }, { text: "æƒ…ç·’æ„ŸçŸ¥ï¼šæ„Ÿè¦ºå¥½æ†‚é¬±... ç•«å®¶ç•¶æ™‚å¾ˆå­¤ç¨ï¼Ÿ", score: { N: 2, water: 2 } }] },
            { id: 7, category: "Chat", question: "ä½ æ›´å–œæ­¡è·Ÿå“ªä¸€ç¨®äººèŠå¤©ï¼Ÿ", options: [{ text: "è…³è¸å¯¦åœ°å‹ï¼šèŠç¾é£Ÿã€èŠå…«å¦ã€èŠç”Ÿæ´»ã€‚", score: { S: 2, earth: 1 } }, { text: "è…¦æ´å¤§é–‹å‹ï¼šèŠå®‡å®™ã€èŠæœªä¾†ç§‘æŠ€ã€‚", score: { N: 2, air: 1 } }] },
            { id: 8, category: "Decide", question: "è²·æ±è¥¿æ™‚ï¼Œæœ€å¾Œè®“ä½ åˆ·å¡çš„é—œéµï¼Ÿ", options: [{ text: "CP å€¼èˆ‡è¦æ ¼ï¼šåŠŸèƒ½æœ€å¼·ã€åƒ¹æ ¼åˆç†ã€‚", score: { T: 2, S: 1, earth: 2 } }, { text: "å“ç‰Œèˆ‡æ„Ÿè¦ºï¼šå–œæ­¡ç†å¿µï¼Œæˆ–æ‹¿åœ¨æ‰‹ä¸Šçš„è³ªæ„Ÿã€‚", score: { F: 2, N: 1, fire: 1 } }] },
            { id: 9, category: "Plan", question: "ä¸‹å€‹æœˆå»æ—¥æœ¬æ—…éŠï¼Œé‚„æœ‰30å¤©ï¼Œä½ çš„ç‹€æ…‹ï¼Ÿ", options: [{ text: "Excel è¡¨æ ¼æ§ï¼šè¡Œç¨‹äº¤é€šéƒ½æ’å¥½äº†ã€‚", score: { J: 2, earth: 2 } }, { text: "ä½›ç³»éš¨ç·£æ´¾ï¼šåªè¨‚äº†æ©Ÿç¥¨ï¼Œå‰©ä¸‹çš„å†çœ‹ã€‚", score: { P: 2, fire: 1 } }] },
            { id: 10, category: "Life", question: "äººç”Ÿå°ä½ ä¾†èªªï¼Œæ¯”è¼ƒåƒæ˜¯ä¸€å ´ï¼Ÿ", options: [{ text: "å»ºç¯‰å·¥ç¨‹ï¼šä¾ç…§è—åœ–è“‹å‡ºå®å‰é«˜æ¨“ã€‚", score: { J: 1, S: 1, earth: 2 } }, { text: "å³èˆˆçˆµå£«æ¨‚ï¼šéš¨ç•¶ä¸‹çš„æ„Ÿè¦ºæ¼”å¥ã€‚", score: { P: 1, N: 1, water: 1 } }] }
        ];

        function selectBlood(type) {
            userData.bloodType = type;
            document.querySelectorAll('.blood-btn').forEach(btn => {
                btn.classList.remove('bg-nexus-accent', 'text-black', 'font-bold', 'border-transparent');
                btn.classList.add('bg-black/40', 'border-gray-500');
            });
            document.getElementById('btn-' + type).classList.remove('bg-black/40', 'border-gray-500');
            document.getElementById('btn-' + type).classList.add('bg-nexus-accent', 'text-black', 'font-bold', 'border-transparent');
        }

        function startQuiz() {
            userData.name = document.getElementById('userName').value;
            userData.birthMonth = document.getElementById('birthMonth').value;
            userData.birthDay = document.getElementById('birthDay').value;

            if(!userData.name || !userData.birthMonth || !userData.birthDay || !userData.bloodType) {
                alert("è«‹å®Œæ•´å¡«å¯«è³‡æ–™"); return;
            }
            document.getElementById('phase-input').classList.add('hidden');
            document.getElementById('phase-quiz').classList.remove('hidden');
            renderQuestion();
        }

        function renderQuestion() {
            if(currentStep >= quizData.length) {
                showLoading(); return;
            }
            const q = quizData[currentStep];
            const container = document.getElementById('phase-quiz');
            container.classList.remove('fade-in');
            void container.offsetWidth; container.classList.add('fade-in');

            document.getElementById('qCategory').innerText = q.category;
            document.getElementById('qText').innerText = q.question;
            document.getElementById('qIndex').innerText = currentStep + 1;
            document.getElementById('progressBar').style.width = ((currentStep / quizData.length) * 100) + '%';

            const btnA = document.getElementById('optA');
            const btnB = document.getElementById('optB');
            btnA.innerText = q.options[0].text;
            btnA.onclick = () => handleAnswer(q.options[0].score);
            btnB.innerText = q.options[1].text;
            btnB.onclick = () => handleAnswer(q.options[1].score);
        }

        function handleAnswer(delta) {
            for(let key in delta) scores[key] += delta[key];
            currentStep++;
            renderQuestion();
        }

        function showLoading() {
            document.getElementById('phase-quiz').classList.add('hidden');
            document.getElementById('phase-loading').classList.remove('hidden');
            
            const loadingTexts = ["æ­£åœ¨ä¸‹è¼‰ 2026 æ˜Ÿæ›†...", "æ ¡æ­£ 2026 æµå¹´åƒæ•¸...", "åˆ†æ MBTI æˆé•·è·¯å¾‘...", "ç”Ÿæˆå¹´åº¦é è¨€..."];
            let i = 0;
            setInterval(() => {
                if(i < loadingTexts.length) {
                    document.getElementById('loadingText').innerText = loadingTexts[i];
                    i++;
                }
            }, 600);
            setTimeout(() => calculateResult(), 2500);
        }

        function calculateResult() {
            // MBTI
            const mbti = (scores.E > scores.I ? 'E':'I') + (scores.N > scores.S ? 'N':'S') + (scores.F > scores.T ? 'F':'T') + (scores.J > scores.P ? 'J':'P');
            // Zodiac
            const m = parseInt(userData.birthMonth), d = parseInt(userData.birthDay);
            const days = [20,19,21,20,21,21,23,23,23,23,22,22];
            const signs = ["æ‘©ç¾¯åº§","æ°´ç“¶åº§","é›™é­šåº§","ç‰¡ç¾Šåº§","é‡‘ç‰›åº§","é›™å­åº§","å·¨èŸ¹åº§","ç…å­åº§","è™•å¥³åº§","å¤©ç§¤åº§","å¤©è åº§","å°„æ‰‹åº§","æ‘©ç¾¯åº§"];
            const zodiac = m - (d < days[m-1]?1:0) <= 0 ? signs[11] : signs[m-(d<days[m-1]?1:0)];
            // Vibe
            const vibes = { Fire: scores.fire, Earth: scores.earth, Air: scores.air, Water: scores.water };
            const vibeElement = Object.keys(vibes).reduce((a, b) => vibes[a] >= vibes[b] ? a : b);

            const data = generateDeepContent(mbti, vibeElement, zodiac, userData.bloodType, userData.name);
            
            document.getElementById('phase-loading').classList.add('hidden');
            document.getElementById('phase-result').classList.remove('hidden');
            
            // 2026 Specific Logic
            const now = new Date();
            document.getElementById('resDate').innerText = `2026.${now.getMonth()+1}.${now.getDate()}`;
            document.getElementById('resZodiac').innerText = zodiac;
            document.getElementById('resBlood').innerText = userData.bloodType + 'å‹';
            
            document.getElementById('resMBTI').innerText = mbti;
            document.getElementById('resMBTIExplain').innerText = data.mbtiBreakdown;
            document.getElementById('resArchetype').innerText = data.title;
            document.getElementById('resKeywords').innerText = data.keywords;
            
            document.getElementById('resDescMain').innerHTML = data.descMain;
            document.getElementById('resDescVibe').innerHTML = data.descVibe;
            document.getElementById('resAdvice').innerText = data.advice;
            document.getElementById('resLucky').innerText = data.lucky; 
        }

        function generateDeepContent(mbti, vibeElement, zodiac, blood, name) {
            
            // MBTI DB
            const mbtiDB = {
                'INTJ': { title: 'å¹•å¾Œå¸ç‹', trait: 'ä½ æ“æœ‰ä¸€ç¨®ã€Œçœ‹ç©¿æœ¬è³ªã€çš„Xå…‰çœ¼ã€‚åœ¨åˆ¥äººé‚„åœ¨è¨è«–ç¾ç‹€æ™‚ï¼Œä½ å·²ç¶“åœ¨è…¦ä¸­æ¨¡æ“¬äº†æœªä¾†äº”å¹´çš„çµå±€ã€‚', shadow: 'å°å¹³åº¸çš„ä¸è€ç…©å¸¸è®“ä½ æ„Ÿåˆ°å­¤ç¨ã€‚' },
                'INTP': { title: 'é‚è¼¯é¬¼æ‰', trait: 'ä½ çš„å¤§è…¦åƒæ˜¯ä¸€å°æ°¸ä¸åœæ­‡çš„è¶…ç´šé›»è…¦ï¼Œå°æ–¼ã€Œç‚ºä»€éº¼ã€çš„åŸ·è‘—å¤§æ–¼ã€Œæ˜¯ä»€éº¼ã€ã€‚', shadow: 'å¸¸é™·å…¥åˆ†æç™±ç˜“ï¼Œå¿˜äº†ç”Ÿæ´»éœ€è¦æº«åº¦ã€‚' },
                'ENTJ': { title: 'æˆ°å ´æŒ‡æ®å®˜', trait: 'å¤©ç”Ÿçš„é ˜è¢–ï¼Œæ•ˆç‡æ˜¯ä½ çš„ä¿¡ä»°ã€‚ä½ ä¸æ˜¯åœ¨ç­‰å¾…æ©Ÿæœƒï¼Œè€Œæ˜¯åœ¨å‰µé€ æ©Ÿæœƒã€‚', shadow: 'æœ‰æ™‚éæ–¼å¼·å‹¢ï¼Œæœƒä¸å°å¿ƒç¢¾ç¢åˆ¥äººçš„ç»ç’ƒå¿ƒã€‚' },
                'ENTP': { title: 'æƒ¡é­”è¾¯è­·äºº', trait: 'æ€æƒ³çš„ç‰¹æŠ€æ¼”å“¡ï¼Œå–œæ­¡åœ¨æ··äº‚ä¸­å°‹æ‰¾ç§©åºã€‚çˆ­è«–å°ä½ ä¾†èªªä¸æ˜¯åµæ¶ï¼Œè€Œæ˜¯æ¿€ç›ªçœŸç†ã€‚', shadow: 'ä¸‰åˆ†é˜ç†±åº¦æ˜¯ä½ æœ€å¤§çš„æ•µäººã€‚' },
                'INFJ': { title: 'é€šéˆå°å¸«', trait: 'ä½ æ˜¯ä¸–ç•Œä¸Šæœ€ç¨€æœ‰çš„å­˜åœ¨ï¼Œæ“æœ‰æ¥µå¼·çš„å…±æƒ…åŠ›èˆ‡ç›´è¦ºã€‚å¸¸è¦ºå¾—è‡ªå·±ä¸å±¬æ–¼é€™å€‹æ™‚ä»£ã€‚', shadow: 'ç‚ºç…§é¡§åˆ¥äººçš„æƒ…ç·’ï¼Œå¸¸æŠŠè‡ªå·±æ¶ˆè€—æ®†ç›¡ã€‚' },
                'INFP': { title: 'æµæµªè©©äºº', trait: 'å…§å¿ƒæ“æœ‰ä¸€åº§ç§˜å¯†èŠ±åœ’ï¼Œåªæœ‰æ¥µå°‘æ•¸äººèƒ½æ‹¿åˆ°é‘°åŒ™ã€‚å°çœŸèª æœ‰è‘—è¿‘ä¹æ½”ç™–çš„å …æŒã€‚', shadow: 'ç¾å¯¦ä¸–ç•Œçš„ç²—ç³™å¸¸è®“ä½ æ„Ÿåˆ°å—å‚·ã€‚' },
                'ENFJ': { title: 'ç¤¾ç¾¤æ•™ä¸»', trait: 'ä½ æœ‰ä¸€ç¨®è®“é™Œç”Ÿäººé¡˜æ„å°ä½ æå¿ƒæè‚ºçš„é­”åŠ›ã€‚ä½ çš„å¿«æ¨‚ä¾†è‡ªæ–¼çœ‹è¦‹å‘¨åœçš„äººæˆé•·ã€‚', shadow: 'å¤ªéåœ¨æ„åˆ¥äººçš„è©•åƒ¹ï¼Œå¸¸å¿˜äº†è‡ªå·±ã€‚' },
                'ENFP': { title: 'å¿«æ¨‚ç˜‹å­', trait: 'ä½ çš„éˆé­‚æ˜¯ç”±å½©è™¹èˆ‡é–ƒé›»çµ„æˆçš„ã€‚å°ä¸–ç•Œå……æ»¿äº†å­©å­èˆ¬çš„å¥½å¥‡å¿ƒï¼Œè¨å­ä¸€åˆ‡é‡è¤‡çš„äº‹ç‰©ã€‚', shadow: 'æƒ…ç·’ä¾†å¾—å¿«å»å¾—ä¹Ÿå¿«ï¼Œæ˜“é™·ç„¦æ…®ã€‚' },
                'ISTJ': { title: 'çš‡å®¶å®ˆè¡›', trait: 'ä½ æ˜¯æ··äº‚ä¸–ç•Œä¸­çš„å®šæµ·ç¥é‡ã€‚æ‰¿è«¾å°ä½ ä¾†èªªé‡å¦‚æ³°å±±ï¼Œåªè¦ç­”æ‡‰çš„äº‹ï¼Œçµ•å°ä½¿å‘½å¿…é”ã€‚', shadow: 'å°æ”¹è®Šçš„æŠ—æ‹’ï¼Œæœ‰æ™‚æœƒè®“ä½ éŒ¯å¤±è‰¯æ©Ÿã€‚' },
                'ISFJ': { title: 'è¬èƒ½ç®¡å®¶', trait: 'ä½ è¨˜å¾—æ‰€æœ‰äººçš„å–œå¥½èˆ‡åœ°é›·ï¼Œæ˜¯åœ˜éšŠä¸­æœ€æº«æš–çš„è† æ°´ã€‚é»˜é»˜ä»˜å‡ºä¸æ±‚å›å ±ã€‚', shadow: 'éåº¦çŠ§ç‰²è‡ªå·±ï¼Œéœ€è¦å­¸æœƒèªªã€Œä¸ã€ã€‚' },
                'ESTJ': { title: 'éµè¡€ç¸½è£', trait: 'æ•ˆç‡ã€å‚³çµ±ã€ç§©åºã€‚ä½ æ˜¯ç¤¾æœƒé‹è½‰çš„åŸºçŸ³ï¼Œèƒ½è¿…é€Ÿå°‡æ··äº‚çš„å±€é¢ç†å‡ºé ­ç·’ã€‚', shadow: 'æœ‰æ™‚éæ–¼çœ‹é‡çµæœï¼Œå¿½ç•¥äº†äººæƒ…ä¸–æ•…ã€‚' },
                'ESFJ': { title: 'ç¤¾äº¤å¥³ç‹', trait: 'å“ªè£¡æœ‰ä½ ï¼Œå“ªè£¡å°±æœ‰æ­¡ç¬‘èˆ‡å‡èšåŠ›ã€‚ä½ å°ä»–äººçš„æƒ…ç·’è®ŠåŒ–æ¥µåº¦æ•æ„Ÿã€‚', shadow: 'å®³æ€•è¢«æ’æ“ ï¼Œæœ‰æ™‚å§”å±ˆè‡ªå·±é…åˆå¤§å®¶ã€‚' },
                'ISTP': { title: 'å­¤ç‹¼åˆºå®¢', trait: 'è©±å°‘æ‰‹å·§ï¼Œå–„æ–¼è§£æ±ºå¯¦éš›å•é¡Œã€‚åœ¨å±æ©Ÿæ™‚åˆ»ï¼Œå¤§å®¶æ…Œæˆä¸€åœ˜ï¼Œåªæœ‰ä½ å†·éœæ‰¾å‡ºç”Ÿè·¯ã€‚', shadow: 'å°æƒ…æ„Ÿè¡¨é”æ„Ÿåˆ°æ£˜æ‰‹ï¼Œå¸¸è¢«èª¤èªç‚ºå†·è¡€ã€‚' },
                'ISFP': { title: 'æµªæµè—è¡“å®¶', trait: 'ç”¨æ„Ÿå®˜é«”é©—ä¸–ç•Œï¼Œæ´»åœ¨ç•¶ä¸‹ã€‚ä½ çš„å¯©ç¾èˆ‡å“å‘³æ˜¯å¤©ç”Ÿçš„ï¼Œä¸å–œæ­¡è¢«ä»»ä½•æ¨™ç±¤å®šç¾©ã€‚', shadow: 'åœ¨å£“åŠ›ä¸‹å®¹æ˜“é¸æ“‡é€ƒé¿ã€‚' },
                'ESTP': { title: 'å¤±æ§ç«ç®­', trait: 'æ´»åœ¨æ¥µé™çš„é‚Šç·£ï¼Œè¿½æ±‚åˆºæ¿€èˆ‡å¯¦è³ªçš„å›å ±ã€‚ä½ æ˜¯å¤©ç”Ÿçš„æ¨éŠ·å“¡èˆ‡å†’éšªå®¶ã€‚', shadow: 'å®¹æ˜“å› è¡å‹•åšå‡ºè®“è‡ªå·±å¾Œæ‚”çš„æ±ºå®šã€‚' },
                'ESFP': { title: 'å¤©ç”Ÿå·¨æ˜Ÿ', trait: 'åªè¦æœ‰ä½ åœ¨ï¼Œç”Ÿæ´»å°±ä¸æœƒç„¡èŠã€‚ä½ æŠŠæ¯ä¸€å¤©éƒ½ç•¶ä½œæœ€å¾Œä¸€å¤©ä¾†æ´»ï¼Œæ¥µå…·æ„ŸæŸ“åŠ›ã€‚', shadow: 'å°åš´è‚…çš„è©±é¡Œå®¹æ˜“æ„Ÿåˆ°ä¸è€ç…©ã€‚' }
            };

            const mbtiDict = { 'E': 'å¤–å‘', 'I': 'å…§å‘', 'S': 'å¯¦æ„Ÿ', 'N': 'ç›´è¦º', 'T': 'ç†æ€§', 'F': 'æ„Ÿæ€§', 'J': 'åˆ¤æ–·', 'P': 'æ„ŸçŸ¥' };
            const breakdown = mbti.split('').map(char => `${mbtiDict[char]}(${char})`).join(' + ');

            // Vibe DB
            const vibeDB = {
                'Fire': { 
                    keyword: 'ç«å…ƒç´  - ç†¾ç†± Ã— ä¾µç•¥æ€§', 
                    desc: 'ä½ çš„æ°£å ´å¦‚åŒä¸€åœ˜ç‡ƒç‡’çš„ç«ï¼Œçµ¦äºº<b>ã€Œå……æ»¿æ´»åŠ›ã€è‡ªä¿¡ã€</b>çš„æ„Ÿè¦ºã€‚<br>é¡ä¼¼<b>ç‰¡ç¾Šã€ç…å­æˆ–å°„æ‰‹</b>ã€‚åœ¨ 2026 å¹´ï¼Œé€™ç¨®æ°£å ´å°‡å¹«åŠ©ä½ åœ¨ç«¶çˆ­æ¿€çƒˆçš„ç’°å¢ƒä¸­è„«ç©è€Œå‡ºã€‚ä½†è¨˜å¾—ï¼Œéåº¦çš„ç†±æƒ…æœ‰æ™‚æœƒç¼å‚·ä»–äººï¼Œå­¸æœƒå¶çˆ¾ã€Œé™æº«ã€æ˜¯ä½ æ˜å¹´çš„èª²é¡Œã€‚' 
                },
                'Earth': { 
                    keyword: 'åœŸå…ƒç´  - ç©©é‡ Ã— è·é›¢æ„Ÿ', 
                    desc: 'ä½ çš„æ°£å ´å¦‚åŒä¸€åº§å±±ï¼Œçµ¦äºº<b>ã€Œé å¾—ä½ã€ä½†åˆæœ‰é»ã€Œé«˜å†·ã€</b>çš„å°è±¡ã€‚<br>é¡ä¼¼<b>æ‘©ç¾¯ã€é‡‘ç‰›æˆ–è™•å¥³</b>ã€‚2026 æ˜¯å‹•ç›ªçš„ä¸€å¹´ï¼Œè€Œä½ é€™ç¨®ã€Œä¸å‹•å¦‚å±±ã€çš„ç‰¹è³ªå°‡æˆç‚ºå¤§å®¶ä¾è³´çš„å°è±¡ã€‚ä½ çš„å°ˆæ¥­æ„Ÿæœƒå¸å¼•è²´äººï¼Œä½†è«‹é©æ™‚å±•éœ²å¾®ç¬‘ï¼Œåˆ¥è®“æ©Ÿæœƒå› ç‚ºè·é›¢æ„Ÿè€Œæºœèµ°ã€‚' 
                },
                'Air': { 
                    keyword: 'é¢¨å…ƒç´  - éˆå‹• Ã— æ‰æ‘¸ä¸å®š', 
                    desc: 'ä½ çš„æ°£å ´åƒé¢¨ä¸€æ¨£è‡ªç”±ï¼Œçµ¦äºº<b>ã€Œè°æ˜ã€å¥½èŠï¼Œä½†å¾ˆé›£çœŸæ­£æŠ“å¾—ä½ã€</b>çš„æ„Ÿè¦ºã€‚<br>é¡ä¼¼<b>é›™å­ã€å¤©ç§¤æˆ–æ°´ç“¶</b>ã€‚2026 æ˜¯è³‡è¨Šçˆ†ç‚¸çš„ä¸€å¹´ï¼Œé€™æ­£æ˜¯ä½ çš„ä¸»å ´ã€‚ä½ çš„é©æ‡‰åŠ›èˆ‡ç¤¾äº¤æ‰‹è…•å°‡ç‚ºä½ å¸¶ä¾†æ„æƒ³ä¸åˆ°çš„è²¡å¯Œã€‚å”¯ä¸€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ¥è®“æ‰¿è«¾è®Šæˆç©ºé ­æ”¯ç¥¨ã€‚' 
                },
                'Water': { 
                    keyword: 'æ°´å…ƒç´  - æº«æŸ” Ã— ç™‚ç™’åŠ›', 
                    desc: 'ä½ çš„æ°£å ´å¸¶æœ‰æ°´çš„æµå‹•æ€§ï¼Œçµ¦äºº<b>ã€Œç„¡å®³ã€æº«æŸ”ä¸”ç¥ç¥•ã€</b>çš„æ„Ÿè¦ºã€‚<br>é¡ä¼¼<b>å¤©è ã€é›™é­šæˆ–å·¨èŸ¹</b>ã€‚åœ¨ 2026 å¹´ï¼Œäººå€‘çš„å¿ƒéˆæ™®éç„¦æ…®ï¼Œè€Œä½ å°‡æˆç‚ºèº«é‚Šäººçš„ç™‚ç™’è€…ã€‚ä½ çš„ç›´è¦ºåœ¨æ˜å¹´æœƒç•°å¸¸æº–ç¢ºï¼Œè«‹ç›¸ä¿¡é‚£è‚¡ã€Œè«åçš„é æ„Ÿã€ï¼Œå®ƒæœƒå¸¶ä½ é¿é–‹å±éšªã€‚' 
                }
            };

            const zodiacTraits = {
                "ç‰¡ç¾Šåº§": "è¡Œå‹•åŠ›", "é‡‘ç‰›åº§": "å“å‘³", "é›™å­åº§": "éˆæ´»",
                "å·¨èŸ¹åº§": "æº«æƒ…", "ç…å­åº§": "æ¦®è€€", "è™•å¥³åº§": "ç´°ç¯€",
                "å¤©ç§¤åº§": "ç¾æ„Ÿ", "å¤©è åº§": "ç›´è¦º", "å°„æ‰‹åº§": "è‡ªç”±",
                "æ‘©ç¾¯åº§": "é‡å¿ƒ", "æ°´ç“¶åº§": "æ”¹é©", "é›™é­šåº§": "å¤¢æƒ³"
            };

            const luckyMap = {
                'Fire': 'çªç ´ (BREAKTHROUGH)',
                'Earth': 'å»ºæ§‹ (BUILD)',
                'Air': 'é€£çµ (CONNECT)',
                'Water': 'ç›´è¦º (INTUITION)'
            };

            const core = mbtiDB[mbti];
            const vibe = vibeDB[vibeElement];
            const zTrait = zodiacTraits[zodiac];

            return {
                title: core.title,
                mbtiBreakdown: breakdown,
                keywords: `#${mbti} #2026é‹å‹¢ #${vibeElement}`,
                descMain: `<b>è¦ªæ„›çš„ ${name}ï¼Œ</b><br><br>${core.trait}<br><br>çµåˆäº† <b>${zodiac}</b> çš„${zTrait}ï¼Œä»¥åŠ <b>${blood}å‹</b> çš„æ½›æ„è­˜å½±éŸ¿ï¼Œé€ å°±äº†ç¨ç‰¹çš„ä½ ã€‚<br><br><span class="text-purple-300">é™°å½±èˆ‡æŒ‘æˆ°ï¼š</span>${core.shadow}`,
                descVibe: `ä½ çš„ç¤¾äº¤é˜²ç¦¦æ©Ÿåˆ¶åå‘ <b>[ ${vibe.keyword} ]</b>ã€‚<br><br>${vibe.desc}`,
                advice: `ã€2026 å®‡å®™è¨Šæ¯ã€‘<br>é€™ä¸€å¹´å° ${mbti} è€Œè¨€ï¼Œæ˜¯å°‡éå»å¹¾å¹´çš„ç´¯ç©ã€Œè®Šç¾ã€çš„æ™‚åˆ»ã€‚å®‡å®™èƒ½é‡æ­£åœ¨å¾æ··äº‚è½‰å‘æ–°çš„ç§©åºã€‚<br><br>ä½ çš„é—œéµä»»å‹™æ˜¯ï¼šåˆ¥è®“ã€Œéåº¦æ€è€ƒã€æ®ºæ­»äº†ä½ çš„ç›´è¦ºã€‚ä½ çš„ç¨ç‰¹æ€§æ­£æ˜¯ 2026 æœ€ç¨€ç¼ºçš„è²¨å¹£ã€‚ç›¸ä¿¡é‚£å€‹ä¸€é–ƒè€Œéçš„å¿µé ­ï¼Œç«‹åˆ»åŸ·è¡Œå®ƒã€‚`,
                lucky: luckyMap[vibeElement] 
            };
        }
    </script>
</body>
</html>